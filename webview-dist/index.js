function t(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{u(r.next(t))}catch(t){s(t)}}function a(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}u((r=r.apply(t,e||[])).next())}))}function e(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}var n=Object.defineProperty;function r(t,e=!1){let n=window.crypto.getRandomValues(new Uint32Array(1))[0],r=`_${n}`;return Object.defineProperty(window,r,{value:n=>(e&&Reflect.deleteProperty(window,r),null==t?void 0:t(n)),writable:!1,configurable:!0}),n}async function i(t,e={}){return new Promise(((n,i)=>{let s=r((t=>{n(t),Reflect.deleteProperty(window,`_${o}`)}),!0),o=r((t=>{i(t),Reflect.deleteProperty(window,`_${s}`)}),!0);window.__TAURI_IPC__({cmd:t,callback:s,error:o,...e})}))}function s(t,e="asset"){let n=encodeURIComponent(t);return navigator.userAgent.includes("Windows")?`https://${e}.localhost/${n}`:`${e}://localhost/${n}`}((t,e)=>{for(var r in e)n(t,r,{get:e[r],enumerable:!0})})({},{convertFileSrc:()=>s,invoke:()=>i,transformCallback:()=>r});var o=function(){function n(t){this.isOpen=!1,this.encoding=t.encoding||"utf-8",this.options={path:t.path,baudRate:t.baudRate,dataBits:t.dataBits||8,flowControl:t.flowControl||null,parity:t.parity||null,stopBits:t.stopBits||2,timeout:t.timeout||200},this.size=t.size||1024}return n.available_ports=function(){return t(this,void 0,void 0,(function(){var t;return e(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,i("plugin:serialport|available_ports")];case 1:return[2,e.sent()];case 2:return t=e.sent(),[2,Promise.reject(t)];case 3:return[2]}}))}))},n.forceClose=function(n){return t(this,void 0,void 0,(function(){return e(this,(function(t){switch(t.label){case 0:return[4,i("plugin:serialport|force_close",{path:n})];case 1:return[2,t.sent()]}}))}))},n.closeAll=function(){return t(this,void 0,void 0,(function(){return e(this,(function(t){switch(t.label){case 0:return[4,i("plugin:serialport|close_all")];case 1:return[2,t.sent()]}}))}))},n.prototype.cancelListen=function(){return t(this,void 0,void 0,(function(){return e(this,(function(t){try{return this.unListen&&(this.unListen(),this.unListen=void 0),[2]}catch(t){return[2,Promise.reject("Failed to stop listening to the serial port: "+t)]}return[2]}))}))},n.prototype.cancelRead=function(){return t(this,void 0,void 0,(function(){var t;return e(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,i("plugin:serialport|cancel_read",{path:this.options.path})];case 1:return[2,e.sent()];case 2:return t=e.sent(),[2,Promise.reject(t)];case 3:return[2]}}))}))},n.prototype.change=function(n){return t(this,void 0,void 0,(function(){var t,r;return e(this,(function(e){switch(e.label){case 0:return e.trys.push([0,5,,6]),t=!1,this.isOpen?(t=!0,[4,this.close()]):[3,2];case 1:e.sent(),e.label=2;case 2:return n.path&&(this.options.path=n.path),n.baudRate&&(this.options.baudRate=n.baudRate),t?[4,this.open()]:[3,4];case 3:e.sent(),e.label=4;case 4:return[2,Promise.resolve()];case 5:return r=e.sent(),[2,Promise.reject(r)];case 6:return[2]}}))}))},n.prototype.close=function(){return t(this,void 0,void 0,(function(){var t,n;return e(this,(function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),this.isOpen?[4,this.cancelRead()]:[2];case 1:return e.sent(),[4,i("plugin:serialport|close",{path:this.options.path})];case 2:return t=e.sent(),[4,this.cancelListen()];case 3:return e.sent(),this.isOpen=!1,[2,t];case 4:return n=e.sent(),[2,Promise.reject(n)];case 5:return[2]}}))}))},n.prototype.open=function(){return t(this,void 0,void 0,(function(){var t,n;return e(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),this.options.path?this.options.baudRate?this.isOpen?[2]:[4,i("plugin:serialport|open",{path:this.options.path,baudRate:this.options.baudRate,dataBits:this.options.dataBits,flowControl:this.options.flowControl,parity:this.options.parity,stopBits:this.options.stopBits,timeout:this.options.timeout})]:[2,Promise.reject("baudRate cannot be empty!")]:[2,Promise.reject("path cannot be empty!")];case 1:return t=e.sent(),this.isOpen=!0,[2,Promise.resolve(t)];case 2:return n=e.sent(),[2,Promise.reject(n)];case 3:return[2]}}))}))},n.prototype.read=function(n){return t(this,void 0,void 0,(function(){var t;return e(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,i("plugin:serialport|read",{path:this.options.path,timeout:(null==n?void 0:n.timeout)||this.options.timeout,size:(null==n?void 0:n.size)||this.size})];case 1:return[2,e.sent()];case 2:return t=e.sent(),[2,Promise.reject(t)];case 3:return[2]}}))}))},n.prototype.setBaudRate=function(n){return t(this,void 0,void 0,(function(){var t,r;return e(this,(function(e){switch(e.label){case 0:return e.trys.push([0,5,,6]),t=!1,this.isOpen?(t=!0,[4,this.close()]):[3,2];case 1:e.sent(),e.label=2;case 2:return this.options.baudRate=n,t?[4,this.open()]:[3,4];case 3:e.sent(),e.label=4;case 4:return[2,Promise.resolve()];case 5:return r=e.sent(),[2,Promise.reject(r)];case 6:return[2]}}))}))},n.prototype.setPath=function(n){return t(this,void 0,void 0,(function(){var t,r;return e(this,(function(e){switch(e.label){case 0:return e.trys.push([0,5,,6]),t=!1,this.isOpen?(t=!0,[4,this.close()]):[3,2];case 1:e.sent(),e.label=2;case 2:return this.options.path=n,t?[4,this.open()]:[3,4];case 3:e.sent(),e.label=4;case 4:return[2,Promise.resolve()];case 5:return r=e.sent(),[2,Promise.reject(r)];case 6:return[2]}}))}))},n.prototype.write=function(n){return t(this,void 0,void 0,(function(){var t;return e(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),this.isOpen?[4,i("plugin:serialport|write",{value:n,path:this.options.path})]:[2,Promise.reject("Port ".concat(this.options.path," is not open!"))];case 1:return[2,e.sent()];case 2:return t=e.sent(),[2,Promise.reject(t)];case 3:return[2]}}))}))},n.prototype.writeBinary=function(n){return t(this,void 0,void 0,(function(){var t;return e(this,(function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),this.isOpen?n instanceof Uint8Array||n instanceof Array?[4,i("plugin:serialport|write_binary",{value:Array.from(n),path:this.options.path})]:[3,2]:[2,Promise.reject("Port ".concat(this.options.path," is not open!"))];case 1:return[2,e.sent()];case 2:return[2,Promise.reject("value Parameter must be of type string, Uint8Array, or number[]!")];case 3:return[3,5];case 4:return t=e.sent(),[2,Promise.reject(t)];case 5:return[2]}}))}))},n}();export{o as Serialport};
